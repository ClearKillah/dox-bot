from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ContextTypes

HELP_TEXT = """
ü§ñ *–ê–Ω–æ–Ω–∏–º–Ω—ã–π –ß–∞—Ç-–±–æ—Ç*

*–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
/end - –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π —á–∞—Ç
/profile - –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
/groups - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏

*–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã:*
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞" –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–∏—Å–∫–∞
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ, –≤–∏–¥–µ–æ, —Å—Ç–∏–∫–µ—Ä—ã)
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç" –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

*–ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã:*
‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
‚Ä¢ –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º —Å –¥—Ä—É–∑—å—è–º–∏
‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –≥—Ä—É–ø–ø–µ
‚Ä¢ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–æ–Ω–∏–º–Ω—ã

*–ü—Ä–æ—Ñ–∏–ª—å:*
‚Ä¢ –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª –∏ –≤–æ–∑—Ä–∞—Å—Ç
‚Ä¢ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä
‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
‚Ä¢ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

*–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:*
‚Ä¢ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–æ–Ω–∏–º–Ω—ã
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
‚Ä¢ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–∞
‚Ä¢ –ì—Ä—É–ø–ø—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

*–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:*
1. –£–≤–∞–∂–∞–π—Ç–µ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–ø–∞–º
3. –ù–µ –Ω–∞—Ä—É—à–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Telegram
4. –°–æ–æ–±—â–∞–π—Ç–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

*–ü–æ–¥–¥–µ—Ä–∂–∫–∞:*
–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º.
"""

async def show_help(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """Show help message."""
    query = update.callback_query if update.callback_query else None
    
    keyboard = [
        [InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="back_to_main")]
    ]
    
    if query:
        await query.edit_message_text(
            HELP_TEXT,
            reply_markup=InlineKeyboardMarkup(keyboard),
            parse_mode='Markdown'
        )
    else:
        await update.message.reply_text(
            HELP_TEXT,
            reply_markup=InlineKeyboardMarkup(keyboard),
            parse_mode='Markdown'
        )

async def show_help_menu(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """Show help menu with different sections."""
    query = update.callback_query
    
    keyboard = [
        [InlineKeyboardButton("üí¨ –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã", callback_data="help_private")],
        [InlineKeyboardButton("üë• –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã", callback_data="help_groups")],
        [InlineKeyboardButton("üë§ –ü—Ä–æ—Ñ–∏–ª—å", callback_data="help_profile")],
        [InlineKeyboardButton("üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", callback_data="help_security")],
        [InlineKeyboardButton("üìú –ü—Ä–∞–≤–∏–ª–∞", callback_data="help_rules")],
        [InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="back_to_main")]
    ]
    
    await query.edit_message_text(
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª —Å–ø—Ä–∞–≤–∫–∏:",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

async def show_help_section(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """Show specific help section."""
    query = update.callback_query
    section = query.data.split('_')[1]
    
    sections = {
        "private": """
*üí¨ –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã*

‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞" –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–∏—Å–∫–∞
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ, –≤–∏–¥–µ–æ, —Å—Ç–∏–∫–µ—Ä—ã)
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç" –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
‚Ä¢ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–æ–Ω–∏–º–Ω—ã
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
""",
        "groups": """
*üë• –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã*

‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
‚Ä¢ –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º —Å –¥—Ä—É–∑—å—è–º–∏
‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –≥—Ä—É–ø–ø–µ
‚Ä¢ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–æ–Ω–∏–º–Ω—ã
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –≥—Ä—É–ø–ø
""",
        "profile": """
*üë§ –ü—Ä–æ—Ñ–∏–ª—å*

‚Ä¢ –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª –∏ –≤–æ–∑—Ä–∞—Å—Ç
‚Ä¢ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä (–≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º)
‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
‚Ä¢ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–∞—Ç–æ–≤
‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω–æ
""",
        "security": """
*üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å*

‚Ä¢ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω–æ
‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
‚Ä¢ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–∞
‚Ä¢ –ì—Ä—É–ø–ø—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
""",
        "rules": """
*üìú –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è*

1. –£–≤–∞–∂–∞–π—Ç–µ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–ø–∞–º
3. –ù–µ –Ω–∞—Ä—É—à–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Telegram
4. –°–æ–æ–±—â–∞–π—Ç–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
5. –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–π—Ç–µ –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
6. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç–∞ –¥–ª—è —Ä–µ–∫–ª–∞–º—ã
"""
    }
    
    keyboard = [[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥", callback_data="help_menu")]]
    
    await query.edit_message_text(
        sections.get(section, "–†–∞–∑–¥–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"),
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode='Markdown'
    ) 